# Flores Florescem da França (#1140)

O entendimento da resolução deste problema é simples e intuitivo. A maior dificuldade se dá em formular um código que coloque esse entendimento abstrato em termos práticos de um programa em C.

De maneira geral, o enunciado pede que verifiquemos se uma frase pode ser classificada como um tautograma ou não.

Um tautograma é definido como:

* **"[...] um caso especial de aliteração, que é a ocorrência da mesma letra no início de palavras adjacentes."**

De maneira mais simples, é preciso determinar se a frase fornecida possui todas suas palavras iniciadas com a mesma letra.

## Explicação da solução
Intuitivamente, a solução proposta percorre a frase da esquerda para a direita, analisando cada caractere, identificando o início de uma palavra e **comparando a primeira letra de cada palavra com a primeira letra da primeira palavra da frase.**

Caso encontre qualquer palavra cuja primeira letra seja diferente da primeira letra da primeira palavra, o programa utliza uma mudança no valor de uma variável para indicar que a frase não é um tautograma, parando de percorrer a frase.

Caso a frase seja percorrida sem que o valor dessa variável mude, a frase é classificada como tautograma.

## Explicação do código
Antes de entrar em detalhes de código, é interessante explicar o significado atribuído a algumas variáveis importantes, bem como suas funções:


* **(int) primeira_letra**: variável inteira usada para indicar se o caractere que será analisado deverá ser interpretado como a primeira letra de uma palavra. O valor 1 indica que o programa deve interpretar a próxima letra como a primeira letra de uma nova palavra. O valor 0 indica que a próxima letra não é a primeira letra de uma nova palavra.
* **(int) achou_letra_inicial**: variável inteira usada para indicar se o programa já encontrou a primeira letra da primeira palavra da frase (caractere que não seja um espaço). O valor 1 indica que encontrou essa letra inicial. O valor 0 indica que ainda não encontrou.
* **(int) frase_valida**: variável inteira usada para indicar se a frase percorrida é um tautograma ou não. O valor 1 indica que a frase é um tautograma. O valor 0 indica que não é.
* **(char) letra_inicial**: variável que armazena a primeira letra da primeira palavra da frase e servirá de referência para comparações com outras palavras.

No início da função **main** são definidas algumas váriáveis necessárias ao nosso programa. Dentre elas estão o ponteiro **entrada** (aponto para buffer de entrada de dados) que é iniciado com valor NULL, **tam** (tamanho máximo do buffer de entrada), e as variáveis **frase_valida**, **primeira_letra**, **i** (contador) e **achou_letra_inicial**.

```c
int main(){
  char *entrada = NULL;
  size_t tam;
  tam = 1005;
  int frase_valida, primeira_letra, i, achou_letra_inicial;
  char letra_inicial;
```
Depois disso, existe um laço **do{} while;** que servirá para ler várias entradas de frases. No início desse laço, existe um **if** para verificar se a variável entrada possui o valor diferente de **NULL**. Caso essa condição seja satisfeita, o programa libera o espaço alocado na memória apontado pelo ponteiro entrada através da função **free**, garantindo que o espaço no buffer de entrada seja liberado corretamente a cada iteração desse laço.

```c
do{
  if(entrada != NULL)
    free(entrada);
```

Após essa verificação, o programa utiliza a função **malloc** para alocar um espaço na memória que será utilizado como um buffer de entrada, e a função **getline** para ler a linha inteira da entrada padrão do programa (lê a frase, em outras palavras), passando as variáveis **entrada**, **tam**, e passando também o ponteiro **stdin**, que faz a função ler da entrada padrão do programa.

Nas linhas seguintes, são inicializadas as variáveis **achou_letra_inicial** com valor igual a 0 indicando que a primeira letra da frase não foi encontrada, **primeira_letra** com valor igual 1 indicando que a próxima letra a ser encontrada será a primeira letra de uma palavra, e a flag **frase_valida** que começa com valor 1 e irá mudar para 0 assim que se encontre uma palavra que torne a frase inválida.

```c
entrada = malloc(sizeof(char)*tam);
getline(&entrada, &tam, stdin);

achou_letra_inicial = 0;
primeira_letra=1;
frase_valida = 1;
```

Depois disso, o programa utiliza um **for** para percorrer a frase. A condição desse for indica que enquanto não for encontrado um caractere **\0** ou **\n** no vetor entrada, e enquanto a flag **frase_valida** estiver com o valor igual a 1, a frase continuará sendo percorrida. Em outras palavras, o programa sairá dessa laço **quando chegar no final da frase** ou quando o **valor de frase_valida for igual a zero**.

```c
for(i=0; entrada[i] != '\0' && entrada[i] != '\n' && frase_valida == 1; i++)
```

No início desse **for** existe uma condição que serve para verificar se o programa achou um primeiro caractere da frase que não seja um espaço, e sim uma letra. Para isso, é necessário verificar se o valor da variável **achou_letra_inicial** até o momento é igual a zero, e se o caractere atual **entrada[i]** é diferente de um espaço. Caso isso seja verdade, muda-se o valor da variável **achou_letra_inicial** para 1, e armazena-se essa primeira letra encontrada na frase na variável **letra_inicial** que será utilizada nas futuras comparações com as letras iniciais das outras palavras na frase.

```c
  if(achou_letra_inicial == 0 && entrada[i] != ' '){
    achou_letra_inicial = 1;
    letra_inicial = entrada[i];
  }
```

Nas linhas seguintes, há outro **if** onde serão executadas outras condições caso a primeira letra da frase tenha sido encontrada.


 Devemos lembrar que cada caractere do vetor **entrada** pode ser uma letra ou um espaço. Para descobrirmos se o caractere é de fato a primeira letra da palavra, precisamos distinguir , de alguma forma, a primeira letra da palavra, com as demais letras dessa mesma palavra.

A primeira condição verifica se o próximo caractere esperado é a primeira letra de uma palavra, utilizando a variável **primeira_letra**, e se o caractere é de fato uma letra e, não um espaço.

```c
  if(achou_letra_inicial == 1){
    if(primeira_letra == 1 && entrada[i] != ' '){
```

Essa variável **primeira_letra** irá mudar para 1 todas as vezes que um espaço é encontrado na frase. Isso ocorre, pois o espaço em uma frase indica a separação entre uma palavra e outra. Mudando-se essa variável de zero para 1, temos uma forma de saber que houve uma separação entre palavras e, quando for encontrada uma próxima letra, será a primeira letra dessa próxima palavra. Essa mudança ocorre no próximo **else if**.

```c
  else if(entrada[i] == ' '){
    primeira_letra=1;
  }
```

Assim, todas as vezes que **primera_letra** for igual a 0, o programa saberá que os próximos caracteres a serem analisados não serão a primeira letra de uma palavra. Com essa diferenciação, é possível determinar o que será feito em cada um dos casos.

Ateriormente, no primeiro **if**, o valor da variável **primeira_letra** deve ser 1 e o caractere **entrada[i]** deve ser diferente de espaço. Caso isso seja verdadeiro, muda-se novamente o valor de **primeira_letra** para zero, indicando que os próximos caracteres não serão a **primeira letra** de uma palavra.

Finalmente, existe outro **if** para  verificar se essa primeira letra da palavra analisada é diferente da primeira letra da primeira palavra encontrada na frase (variável **letra_inicial**). Caso as letras sejam diferentes, a flag **frase_valida** tem seu valor alterado para zero, indicando que a frase não é um tautograma. Caso sejam iguais, o valor de **frase_valida** permanece inalterado (igual a 1).

```c
    if(primeira_letra == 1 && entrada[i] != ' '){
      primeira_letra = 0;
      if(toupper(entrada[i]) != toupper(letra_inicial))
        frase_valida = 0;
    }
```

Dessa maneira, termina-se o **for** que percorre a frase. No final desse laço, existe uma última verificação que serve para imprimir a saída esperada analisando as variáveis **frase_valida** e **achou_letra_inicial**. Essa verificação só é feita caso a entrada não tenha como primeiro caractere o asterisco ('*') que, de acordo com o enunciado, deve servir para finalizar a leitura das frases na entrada do programa.

```c
  if(entrada[0] != '*'){
    if(frase_valida && achou_letra_inicial)
      printf("Y\n");
    else
      printf("N\n");
  }
```

No final, o fim do laço mais externo é alcançado. O programa apenas sairá desse laço quando receber o caractere * na entrada. Caso contrário, continuará analisando cada frase recebida na entrada.

```c
}while(entrada[0] != '*');
```
